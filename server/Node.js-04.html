
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Node.js-04-http、url、querystring模块 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Node.js-05.html" />
    
    
    <link rel="prev" href="Node.js-03.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../css/">
            
                <a href="../css/">
            
                    
                    css
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../css/css3.html">
            
                <a href="../css/css3.html">
            
                    
                    css3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../framework/">
            
                <a href="../framework/">
            
                    
                    framework
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../framework/Angular-01.html">
            
                <a href="../framework/Angular-01.html">
            
                    
                    angular-01
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../framework/Angular-02.html">
            
                <a href="../framework/Angular-02.html">
            
                    
                    angular-02
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../framework/Angular-03.html">
            
                <a href="../framework/Angular-03.html">
            
                    
                    angular-03
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../framework/模块框架.html">
            
                <a href="../framework/模块框架.html">
            
                    
                    seajs&requirejs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../JavaScript/">
            
                <a href="../JavaScript/">
            
                    
                    javascript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../JavaScript/AJAX.html">
            
                <a href="../JavaScript/AJAX.html">
            
                    
                    ajax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../JavaScript/正则表达式.html">
            
                <a href="../JavaScript/正则表达式.html">
            
                    
                    正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../JavaScript/JS运行机制.html">
            
                <a href="../JavaScript/JS运行机制.html">
            
                    
                    JS运行机制
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="apache安装配置.html">
            
                <a href="apache安装配置.html">
            
                    
                    apache安装配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="Node.js-01.html">
            
                <a href="Node.js-01.html">
            
                    
                    Node.js-01-安装配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="Node.js-02.html">
            
                <a href="Node.js-02.html">
            
                    
                    Node.js-02-基础、模块化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="Node.js-03.html">
            
                <a href="Node.js-03.html">
            
                    
                    Node.js-03-ES6、path&fs模块
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.5" data-path="Node.js-04.html">
            
                <a href="Node.js-04.html">
            
                    
                    Node.js-04-http、url、querystring模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="Node.js-05.html">
            
                <a href="Node.js-05.html">
            
                    
                    Node.js-05-express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="Node.js-06.html">
            
                <a href="Node.js-06.html">
            
                    
                    Node.js-05-mysql
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../tools/">
            
                <a href="../tools/">
            
                    
                    tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../tools/Git基础.html">
            
                <a href="../tools/Git基础.html">
            
                    
                    git基础
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../end/">
            
                <a href="../end/">
            
                    
                    结束
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Node.js-04-http、url、querystring模块</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>@(node.js)[javascript, node.js, &#x670D;&#x52A1;&#x5668;]</p>
<h1 id="nodejs-04-http&#x3001;url&#x3001;querystring&#x6A21;&#x5757;">Node.js-04-http&#x3001;url&#x3001;querystring&#x6A21;&#x5757;</h1>
<h3 id="http&#x6A21;&#x5757;">http&#x6A21;&#x5757;</h3>
<blockquote>
<p>&#x5F00;&#x542F;&#x670D;&#x52A1;&#xFF0C;&#x6301;&#x7EED;&#x76D1;&#x542C;&#xFF0C;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x505A;&#x51FA;&#x54CD;&#x5E94;&#x3002;</p>
</blockquote>
<ul>
<li><p>&#x8BED;&#x6CD5;</p>
<ul>
<li>&#x57FA;&#x672C;&#x8BED;&#x6CD5;1</li>
<li><code>request.url</code>&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x5730;&#x5740;</li>
<li><code>request.method</code>&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;</li>
<li><p><code>resquest.on(&apos;data&apos;,(chunk)=&gt;{})</code>,<code>request.on(end,()=&gt;{})</code>&#x83B7;&#x53D6;<code>post</code>&#x6570;&#x636E;</p>
<pre><code>  //&#x4F9D;&#x8D56;http&#x6A21;&#x5757;
  const http = require(&apos;http&apos;);
  //&#x521B;&#x5EFA;&#x670D;&#x52A1;
  //request&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;  
  //response&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x636E;
  http.createServer((request, response) =&gt; {
  //&#x54CD;&#x5E94;&#xFF0C;&#x8FD4;&#x56DE;&#x6570;&#x636E;
      response.write(&apos;hello world&apos;);
      response.write(&apos;Hi&apos;);
      //&#x54CD;&#x5E94;&#x7ED3;&#x675F;
      response.end();//&#x8BE5;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x6709;&#xFF0C;&#x544A;&#x8BC9;&#x5BA2;&#x6237;&#x7AEF;&#x54CD;&#x5E94;&#x7ED3;&#x675F;&#x3002;
   })
  //&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;ip&#x5730;&#x5740;&#xFF0C;&#x53CA;&#x6210;&#x529F;&#x8BF7;&#x6C42;&#x540E;&#x7684;callback
  .listen(3000,&apos;192.168.15.103&apos;,() =&gt; {
      console.log(&apos;running&apos;)
  });
</code></pre></li>
<li><p>&#x8BED;&#x6CD5;2</p>
<pre><code>  let server = http.createServer();
  server.on(&apos;request&apos;, (request,response) =&gt; {
      response.end(&apos;hello world&apos;);
  })
  server.listen(3000,&apos;192.168.15.103&apos;,() =&gt;{
      console.log(&apos;running&apos;);
  })
</code></pre></li>
</ul>
</li>
<li><p>&#x4F7F;&#x7528;&#x5230;&#x7684;API</p>
<ul>
<li><p><code>path.basename(str)</code></p>
<ul>
<li>&#x83B7;&#x53D6;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>/</code>&#x540E;&#x7684;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5305;&#x542B;&#x53C2;&#x6570;&#x3001;&#x951A;&#x70B9;<img src="ScreenClip1.png" alt="Alt text"></li>
</ul>
</li>
<li><p><code>path.extname(fileDir)</code></p>
<ul>
<li>&#x83B7;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x540E;&#x7F00;&#x540D;<img src="ScreenClip2.png" alt="Alt text"></li>
</ul>
</li>
<li><code>str.startsWith(str2);</code></li>
<li><code>str.endsWith(str3);</code></li>
<li><code>url.parse(urlStr,true);</code>&#x5E26;&#x4E0A;true&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x5F97;&#x5E26;&#x7684;&#x5BF9;&#x8C61;&#x7684;<code>query</code>&#x5C5E;&#x6027;&#x53D8;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;</li>
<li><code>url.format(urlObj);</code><pre><code>//&#x4F9D;&#x8D56;url&#x6838;&#x5FC3;&#x6A21;&#x5757;
const url = require(&apos;url&apos;);
//&#x5047;&#x8BBE;&#x67D0;url&#x4E3A;&#x4E00;&#x4E0B;&#x5B57;&#x7B26;&#x4E32;
let str = &apos;http://www.baidu.com:8080/main/len/index.html?a=1&amp;b=2&apos;;
//&#x901A;&#x8FC7;url.parse()&#x5C06;url&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;url&#x5BF9;&#x8C61;
let urlObj = url.parse(str,true)
console.log(urlObj);//urlObj&#x5C31;&#x662F;&#x4E0B;&#x90E8; o &#x7684;&#x5F62;&#x5F0F;
//&#x901A;&#x8FC7;&#x70B9;&#x8BED;&#x6CD5;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;url&#x5730;&#x5740;&#x4F20;&#x9012;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x53C2;&#x6570;
console.log(urlObj.query.a)
let o  = {
  protocol: &apos;http:&apos;,
  slashes: true,
  auth: null,
  host: &apos;www.baidu.com:8080&apos;,
  port: &apos;8080&apos;,
  hostname: &apos;www.baidu.com&apos;,
  hash: null,
  search: &apos;?a=1&amp;b=2&apos;,
  query: { a: &apos;1&apos;, b: &apos;2&apos; },
  pathname: &apos;/main/len/index.html&apos;,
  path: &apos;/main/len/index.html?a=1&amp;b=2&apos;,
  href: &apos;http://www.baidu.com:8080/main/len/index.html?a=1&amp;b=2&apos; 
};
//&#x901A;&#x8FC7;url.format()&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5C06;urlObj&#x5F62;&#x5F0F;&#x7684;&#x5BF9;&#x8C61;&#x518D;&#x8F6C;&#x6362;&#x4E3A;url&#x5730;&#x5740;&#x7684;&#x5F62;&#x5F0F;
let str2 = url.format(o);
console.log(str2);
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li>&#x5B9E;&#x73B0;&#x9759;&#x6001;&#x7F51;&#x7AD9;&#x670D;&#x52A1;&#x5668;&#x7684;&#x529F;&#x80FD;<ul>
<li>MIME<ul>
<li>MIME(Multipurpose Internet Mail Extensions)&#x591A;&#x7528;&#x9014;&#x4E92;&#x8054;&#x7F51;&#x90AE;&#x4EF6;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x3002;&#x662F;&#x8BBE;&#x5B9A;&#x67D0;&#x79CD;&#x6269;&#x5C55;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x7528;&#x4E00;&#x79CD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x6253;&#x5F00;&#x7684;&#x65B9;&#x5F0F;&#x7C7B;&#x578B;&#xFF0C;&#x5F53;&#x8BE5;&#x6269;&#x5C55;&#x540D;&#x6587;&#x4EF6;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x81EA;&#x52A8;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x6253;&#x5F00;&#x3002;&#x591A;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x4E00;&#x4E9B;&#x5BA2;&#x6237;&#x7AEF;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x5A92;&#x4F53;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x65B9;&#x5F0F;&#x3002;</li>
<li>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x54CD;&#x5E94;&#x5934;&#x4E2D;&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5E94;&#x8BE5;&#x4EE5;&#x4F55;&#x79CD;&#x65B9;&#x5F0F;&#x89E3;&#x6790;&#x54CD;&#x5E94;&#x7684;&#x5404;&#x7C7B;&#x683C;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x662F;&#x4EE5;&#x7EAF;&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x89E3;&#x6790;&#x8FD8;&#x662F;&#x4EE5;html&#x6216;&#x662F;js&#x7684;&#x5F62;&#x5F0F;&#x89E3;&#x6790;&#xFF1F;&#x5982;&#xFF1A;html <code>text/html</code>&#xFF1B;&#x7EAF;&#x6587;&#x672C; <code>text/plain</code>...</li>
<li>&#x8BE6;&#x7EC6;&#x767E;&#x5EA6;</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>        const http = require(&apos;http&apos;);
        const path = require(&apos;path&apos;);
        const fs = require(&apos;fs&apos;);

        //&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x5B58;&#x653E;MIME&#x4FE1;&#x606F;&#x7684;json&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x54CD;&#x5E94;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x91CC;&#x9762;&#x627E;&#x4EE5;&#x4F55;&#x79CD;&#x5F62;&#x5F0F;&#x54CD;&#x5E94;&#x5373;&#x53EF;
        //&#x5185;&#x5BB9;&#x5927;&#x81F4;&#x4E3A;
        //{&quot;.avi&quot;: &quot;video/x-msvideo&quot;,&quot;.js&quot;: &quot;application/x-javascript&quot;,&quot;.jpeg&quot;: &quot;image/jpeg&quot;,&quot;.htm&quot;: &quot;text/html&quot;,&quot;.css&quot;: &quot;text/css&quot;}&#x7B49;
        const mime = require(&apos;./mime.json&apos;);

        //&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5B58;&#x653E;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x7684;&#x6587;&#x4EF6;&#x5939;
        let staticDir = &apos;static&apos;;
        //request &#x662F; Class: http.IncomingMessage &#x7684;&#x5B9E;&#x4F8B;
        //response &#x662F; Class: http.ServerResponse &#x7684;&#x5B9E;&#x4F8B;
        http.createServer((request, response) =&gt; {
            //
            let fileName = path.basename(request.url);
            let fileDir = path.join(__dirname, staticDir, fileName);
            //&#x5982;&#x679C;url&#x5730;&#x5740;&#xFF08;&#x8FD9;&#x91CC;&#x7684;&#x5730;&#x5740;&#x6307;&#x7684;&#x662F;&#x7AEF;&#x53E3;&#x4E4B;&#x540E;&#x7684;&#x90E8;&#x5206;&#xFF09;&#x4EE5;www&#x5F00;&#x5934;
            if (request.url.startsWith(&apos;/www&apos;)) {
            //&#x90A3;&#x4E48;&#x5C31;&#x8FD4;&#x56DE;static&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x7684;&#x76F8;&#x5E94;&#x7684;&#x6587;&#x4EF6;
                //&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x5730;&#x5740;&#x4E3A;http://ip:port/www/index.html&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x8FD4;&#x56DE;static&#x6587;&#x4EF6;&#x5939;&#x4E0B;index.html&#x7684;&#x6587;&#x4EF6;
                //&#x8FD4;&#x56DE;&#x4EC0;&#x4E48;&#x6587;&#x4EF6;&#x4E0E;&#x524D;&#x7AEF;&#x6307;&#x5411;&#x7684;url&#x5E76;&#x65E0;&#x5173;&#x7CFB;&#xFF0C;&#x540E;&#x53F0;&#x53EF;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x8FD4;&#x56DE;&#x4EFB;&#x610F;&#x6570;&#x636E;&#x3002;
                //&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x524D;&#x7AEF;&#x8BF7;&#x6C42;&#x7684;&#x5730;&#x5740;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x5C31;&#x662F;&#x6587;&#x4EF6;&#x7684;&#x771F;&#x662F;&#x8DEF;&#x5F84;&#xFF0C;&#x6545;&#x5728;&#x6B64;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8DEF;&#x5F84;&#x3002;
                fs.readFile(fileDir, &apos;utf8&apos;, (err, data) =&gt; {
                    //&#x83B7;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x540E;&#x7F00;&#x540D;
                    let ext = path.extname(fileDir);

                    //&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x7528;cType&#x50A8;&#x5B58;
                    if(mime[ext]){
                        cType = mime[ext];
                        //&#x5982;&#x679C;&#x662F;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x624D;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x7F16;&#x7801;
                        if(mime[ext].startsWith(&apos;text&apos;)){
                            cType += &apos;;charset=utf8&apos;;//&#x6B64;&#x65F6;cType&#x7684;&#x5F62;&#x5F0F;&#x5C31;&#x662F;&#xFF1A;&apos;text/html;charset=utf8;&apos;
                        }
                    }
                    //&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x5934;&#x4FE1;&#x606F;
                    //&#x72B6;&#x6001;&#x7801;&#x53C2;&#x6570; &#x72B6;&#x6001;&#x7801;num&#xFF0C;&#x4FE1;&#x606F;obj
                    response.writeHead(200,{
                        //&#x8BBE;&#x7F6E;&#x54CD;&#x5E94;&#x6570;&#x636E;&#x7684;&#x683C;&#x5F0F;&#x4E3A;html&#xFF0C;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x4E3A;utf8&#xFF0C;&#x82E5;&#x4E0D;&#x8BBE;&#x7F6E;&#x4F1A;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#x6216;&#x5176;&#x4ED6;bug
                        //text/html &#x5177;&#x4F53;&#x54EA;&#x79CD;&#x683C;&#x5F0F;&#x6587;&#x4EF6;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x54CD;&#x5E94;&#x7C7B;&#x578B;&#xFF0C;&#x67E5;&#x8BE2;MIME&#x534F;&#x8BAE;
                        // &apos;Content-Type&apos;:&apos;text/html;charset=utf8&apos;
                        //&#x683C;&#x5F0F;&#x4E3A;&#x7EAF;&#x6587;&#x672C;
                        // &apos;Content-Type&apos;:&apos;text/plain;charset=utf8&apos;
                        //&#x81EA;&#x52A8;&#x5339;&#x914D;&#x6587;&#x4EF6;&#x7C7B;&#x578B;
                        &apos;Content-Type&apos;:cType

                    });
                    response.end(data);
                })
            }
        }).listen(3000, &apos;192.168.15.103&apos;, () =&gt; {
            console.log(&apos;begining...&apos;);
        });
</code></pre><ul>
<li><p><code>get</code></p>
<ul>
<li>&#x83B7;&#x53D6;<code>get</code>&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x54CD;&#x5E94;&#x3002;</li>
<li>&#x672C;&#x8D28;&#x4E0A;<code>get</code>&#x8BF7;&#x6C42;&#x5C31;&#x662F;&#x5C31;&#x662F;&#x5728;url&#x540E;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#x3002;</li>
<li>&#x901A;&#x8FC7;<code>url.parse()</code>&#x6765;&#x5C06;<code>get</code>&#x7684;&#x53C2;&#x6570;&#x8F6C;&#x6362;&#x4E3A;&#x5BF9;&#x8C61;&#xFF0C;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x54CD;&#x5E94;&#x7684;&#x540E;&#x53F0;&#x903B;&#x8F91;&#x3002;</li>
</ul>
</li>
<li><p><code>post</code></p>
<ul>
<li><code>post</code>&#x65E0;&#x6CD5;&#x901A;&#x8FC7;url&#x5730;&#x5740;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#xFF0C;&#x4E14;&#x53EF;&#x80FD;&#x6570;&#x636E;&#x91CF;&#x8F83;&#x5927;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E0B;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x3002;</li>
<li><p><code>const querystring = require(&apos;querystring&apos;);</code>&#x7528;&#x4E8E;&#x5904;&#x7406;post&#x83B7;&#x5F97;&#x7684;&#x53C2;&#x6570;</p>
<pre><code>  &lt;!-- form&#x8868;&#x5355;&#x901A;&#x8FC7;post&#x63D0;&#x4EA4;&#x6570;&#x636E; --&gt;
  &lt;form action=&quot;/check&quot; method=&quot;post&quot;&gt;
      &#x7528;&#x6237;&#x540D;&#xFF1A;&lt;input type=&quot;text&quot; name=&quot;un&quot;&gt;
      &#x5BC6;&#x7801;&#xFF1A;&lt;input type=&quot;password&quot; name=&quot;pw&quot;&gt;
      &lt;input type=&quot;submit&quot; value=&quot;&#x767B;&#x5F55;&quot;&gt;
  &lt;/form&gt;
</code></pre><pre><code>  //common.js
  //&#x5BF9;&#x83B7;&#x53D6;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#xFF0C;&#x5C31;&#x662F;&#x62BD;&#x53D6;&#x4E86;&#x4E0A;&#x90E8;&#x5B9E;&#x73B0;&#x9759;&#x6001;&#x7F51;&#x7AD9;&#x529F;&#x80FD;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4EE3;&#x7801;&#x3002;
  const path = require(&apos;path&apos;);
  const fs = require(&apos;fs&apos;);
  const mime = require(&apos;./mime.json&apos;);

  exports.staticInit = (req,res,staticDir) =&gt; {
      let fileName = path.basename(req.url);
      let fileDir = path.join(__dirname, staticDir, fileName);
      fs.readFile(fileDir, &apos;utf8&apos;, (err, data) =&gt; {
          let ext = path.extname(fileDir);
          if (mime[ext]) {
              let cType = mime[ext];
              if (mime[ext].startsWith(&apos;text&apos;)) {
                  cType += &apos;;charset=utf8;&apos;;
              }
              res.writeHead(200, {
                  &apos;Content-Type&apos;: cType
              });
          }
          res.end(data);
      });
  }
</code></pre><pre><code>  const http = require(&apos;http&apos;);
  const initObj = require(&apos;./common.js&apos;);
  //&#x7528;&#x4E8E;&#x5904;&#x7406; &apos;a=1&amp;b=2&amp;c=3&apos; &#x8FD9;&#x7C7B;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8F6C;&#x6362;&#x4E3A;&#x5BF9;&#x8C61;
  //querystring.parse(str);
  const querystring = require(&apos;querystring&apos;);
  let staticDir = &apos;./static/&apos;;
  http.createServer((req, res) =&gt; {
      //&#x521D;&#x59CB;&#x5316;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x670D;&#x52A1;&#x5668;
      initObj.staticInit(req, res, staticDir);
      if (req.url.startsWith(&apos;/check&apos;)) {
          //&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x4E8E;&#x63A5;&#x6536;post&#x6570;&#x636E;
          let postData = &apos;&apos;;
          //&#x7C7B;&#x4F3C;&#x4E8E;&#x5927;&#x6587;&#x4EF6;&#x7684;&#x590D;&#x5236;&#xFF0C;&#x6D41;&#x5F0F;&#x4F20;&#x8F93;
          req.on(&apos;data&apos;, (chunk) =&gt; {
              //&#x62FC;&#x63A5;request&#x7684;&#x6BCF;&#x6BB5;&#x6570;&#x636E;
              postData += chunk;
          });
          req.on(&apos;end&apos;, () =&gt; {
              //&#x5C06;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;&#x5BF9;&#x8C61;
              let postObj = querystring.parse(postData);
              //&#x5224;&#x65AD;&#x767B;&#x5F55;&#x4FE1;&#x606F;&#x662F;&#x5426;&#x7B26;&#x5408;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x6570;&#x636E;
              if (postObj.un === &apos;admin&apos; &amp;&amp; postObj.pw === &apos;123&apos;) {
                  res.end(&apos;&#x767B;&#x5F55;&#x6210;&#x529F;&apos;);
              } else {
                  res.end(&apos;&#x5E10;&#x53F7;&#x6216;&#x5BC6;&#x7801;&#x9519;&#x8BEF;&apos;);
              }
          })
      }
  }).listen(3000, () =&gt; {
      console.log(&apos;runing...&apos;);
  });
</code></pre></li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Node.js-03.html" class="navigation navigation-prev " aria-label="Previous page: Node.js-03-ES6、path&fs模块">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Node.js-05.html" class="navigation navigation-next " aria-label="Next page: Node.js-05-express">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Node.js-04-http、url、querystring模块","level":"1.5.5","depth":2,"next":{"title":"Node.js-05-express","level":"1.5.6","depth":2,"path":"server/Node.js-05.md","ref":"server/Node.js-05.md","articles":[]},"previous":{"title":"Node.js-03-ES6、path&fs模块","level":"1.5.4","depth":2,"path":"server/Node.js-03.md","ref":"server/Node.js-03.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"server/Node.js-04.md","mtime":"2017-04-03T22:25:20.849Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-04-03T22:26:27.943Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

